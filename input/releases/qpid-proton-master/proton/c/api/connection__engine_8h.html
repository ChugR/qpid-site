<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Qpid Proton C API: proton/connection_engine.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qpid Proton C API
   &#160;<span id="projectnumber">master</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('connection__engine_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">connection_engine.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="condition_8h_source.html">proton/condition.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="event_8h_source.html">proton/event.h</a>&gt;</code><br />
<code>#include &lt;proton/import_export.h&gt;</code><br />
<code>#include &lt;<a class="el" href="types_8h_source.html">proton/types.h</a>&gt;</code><br />
</div>
<p><a href="connection__engine_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpn__buf__t.html">pn_buf_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A modifiable memory buffer.  <a href="structpn__buf__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpn__cbuf__t.html">pn_cbuf_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A read-only memory buffer.  <a href="structpn__cbuf__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaa6d94f34ba3e14a5e7176def257a6dc5"><td class="memItemLeft" align="right" valign="top">
typedef struct <a class="el" href="structpn__buf__t.html">pn_buf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gaa6d94f34ba3e14a5e7176def257a6dc5">pn_buf_t</a></td></tr>
<tr class="memdesc:gaa6d94f34ba3e14a5e7176def257a6dc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">A modifiable memory buffer. <br /></td></tr>
<tr class="separator:gaa6d94f34ba3e14a5e7176def257a6dc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga145c4981ce9d390ed9aaa3e0bf471fd3"><td class="memItemLeft" align="right" valign="top">
typedef struct <a class="el" href="structpn__cbuf__t.html">pn_cbuf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga145c4981ce9d390ed9aaa3e0bf471fd3">pn_cbuf_t</a></td></tr>
<tr class="memdesc:ga145c4981ce9d390ed9aaa3e0bf471fd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A read-only memory buffer. <br /></td></tr>
<tr class="separator:ga145c4981ce9d390ed9aaa3e0bf471fd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa72fd40bd99d6702cedd5f33d325e945"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gaa72fd40bd99d6702cedd5f33d325e945">pn_connection_engine_t</a></td></tr>
<tr class="separator:gaa72fd40bd99d6702cedd5f33d325e945"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga644509ac6d43dbc093ad55a0b1b09618"><td class="memItemLeft" align="right" valign="top">
PN_EXTERN <a class="el" href="structpn__buf__t.html">pn_buf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga644509ac6d43dbc093ad55a0b1b09618">pn_buf</a> (char *data, size_t size)</td></tr>
<tr class="memdesc:ga644509ac6d43dbc093ad55a0b1b09618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a pn_buf. <br /></td></tr>
<tr class="separator:ga644509ac6d43dbc093ad55a0b1b09618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad878a83fc95c96609243440f9f6ff15b"><td class="memItemLeft" align="right" valign="top">
PN_EXTERN <a class="el" href="structpn__cbuf__t.html">pn_cbuf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gad878a83fc95c96609243440f9f6ff15b">pn_cbuf</a> (const char *data, size_t size)</td></tr>
<tr class="memdesc:gad878a83fc95c96609243440f9f6ff15b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a pn_cbuf. <br /></td></tr>
<tr class="separator:gad878a83fc95c96609243440f9f6ff15b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf63012d048980969964b277d2a11fa59"><td class="memItemLeft" align="right" valign="top">PN_EXTERN int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gaf63012d048980969964b277d2a11fa59">pn_connection_engine_init</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *engine)</td></tr>
<tr class="separator:gaf63012d048980969964b277d2a11fa59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0bfd3ac3afbcb665cb53116747e30b6b"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga0bfd3ac3afbcb665cb53116747e30b6b">pn_connection_engine_final</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *engine)</td></tr>
<tr class="separator:ga0bfd3ac3afbcb665cb53116747e30b6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7be7c47d7ced284a7a063740c3190ab"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="structpn__buf__t.html">pn_buf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gad7be7c47d7ced284a7a063740c3190ab">pn_connection_engine_read_buffer</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="separator:gad7be7c47d7ced284a7a063740c3190ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga709193ccc0ef9b69d9258187848ee5b2"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga709193ccc0ef9b69d9258187848ee5b2">pn_connection_engine_read_done</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *, size_t n)</td></tr>
<tr class="separator:ga709193ccc0ef9b69d9258187848ee5b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaace5db39fa0ff863537f4a1b28f26bfa"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gaace5db39fa0ff863537f4a1b28f26bfa">pn_connection_engine_read_close</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="separator:gaace5db39fa0ff863537f4a1b28f26bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23d45a51492505e1c5bdab0772229f87"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="structpn__cbuf__t.html">pn_cbuf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga23d45a51492505e1c5bdab0772229f87">pn_connection_engine_write_buffer</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="separator:ga23d45a51492505e1c5bdab0772229f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb4a17a83b65e129e6045fe09a80a328"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gafb4a17a83b65e129e6045fe09a80a328">pn_connection_engine_write_done</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *, size_t n)</td></tr>
<tr class="separator:gafb4a17a83b65e129e6045fe09a80a328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0fec7f4c27337722b67a8ebe5d5e3857"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga0fec7f4c27337722b67a8ebe5d5e3857">pn_connection_engine_write_close</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="separator:ga0fec7f4c27337722b67a8ebe5d5e3857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0523c0805aa37468414f22421f849f50"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga0523c0805aa37468414f22421f849f50">pn_connection_engine_disconnected</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="separator:ga0523c0805aa37468414f22421f849f50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8274e2ece108708422d10e19565765a"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__event.html#ga87f3028b4888632bbd56fb71ac737ae8">pn_event_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gaf8274e2ece108708422d10e19565765a">pn_connection_engine_dispatch</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="separator:gaf8274e2ece108708422d10e19565765a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71879bf76e1cce4121d8ecd56d28ea06"><td class="memItemLeft" align="right" valign="top">PN_EXTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga71879bf76e1cce4121d8ecd56d28ea06">pn_connection_engine_finished</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="separator:ga71879bf76e1cce4121d8ecd56d28ea06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63f5022e371f90971e8b5c4c46a4c9ea"><td class="memItemLeft" align="right" valign="top">
PN_EXTERN <a class="el" href="group__connection.html#ga886351d81ff3a977a284a206526c5aff">pn_connection_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga63f5022e371f90971e8b5c4c46a4c9ea">pn_connection_engine_connection</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="memdesc:ga63f5022e371f90971e8b5c4c46a4c9ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the AMQP connection, owned by the <a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a>. <br /></td></tr>
<tr class="separator:ga63f5022e371f90971e8b5c4c46a4c9ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga646b6151d3dc729300285868fabad11d"><td class="memItemLeft" align="right" valign="top">
PN_EXTERN <a class="el" href="group__transport.html#gac26eda05f649bbf0399f3d8d78d12fa8">pn_transport_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#ga646b6151d3dc729300285868fabad11d">pn_connection_engine_transport</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="memdesc:ga646b6151d3dc729300285868fabad11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the proton transport, owned by the <a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a>. <br /></td></tr>
<tr class="separator:ga646b6151d3dc729300285868fabad11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab6b02e7480270a9ff64e71b391a6cd0f"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__condition.html#ga11eb7db7d2c205169fe3d47c996a95a5">pn_condition_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection__engine.html#gab6b02e7480270a9ff64e71b391a6cd0f">pn_connection_engine_condition</a> (<a class="el" href="structpn__connection__engine__t.html">pn_connection_engine_t</a> *)</td></tr>
<tr class="separator:gab6b02e7480270a9ff64e71b391a6cd0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><b>Experimental</b> The Connection Engine API wraps up the proton engine objects associated with a single connection: pn_connection_t, pn_transport_t and pn_collector_t. It provides a simple bytes-in/bytes-out interface for IO and generates pn_event_t events to be handled by the application.</p>
<p>The connection engine can be fed with raw AMQP bytes from any source, and it generates AMQP byte output to be written to any destination. You can use the engine to integrate proton AMQP with any IO library, or native IO on any platform.</p>
<p>The engine is not thread safe but each engine is independent. Separate engines can be used concurrently. For example a multi-threaded application can process connections in multiple threads, but serialize work for each connection to the corresponding engine.</p>
<p>The engine is designed to be thread and IO neutral so it can be integrated with single or multi-threaded code in reactive or proactive IO frameworks.</p>
<p>Summary of use:</p>
<ul>
<li>while !pn_connection_engine_finished()<ul>
<li>Read data from your source into <a class="el" href="group__connection__engine.html#gad7be7c47d7ced284a7a063740c3190ab">pn_connection_engine_read_buffer()</a></li>
<li>Call <a class="el" href="group__connection__engine.html#ga709193ccc0ef9b69d9258187848ee5b2">pn_connection_engine_read_done()</a> when complete.</li>
<li>Write data from <a class="el" href="group__connection__engine.html#ga23d45a51492505e1c5bdab0772229f87">pn_connection_engine_write_buffer()</a> to your destination.</li>
<li>Call <a class="el" href="group__connection__engine.html#gafb4a17a83b65e129e6045fe09a80a328">pn_connection_engine_write_done()</a> to indicate how much was written.</li>
<li>Call <a class="el" href="group__connection__engine.html#gaf8274e2ece108708422d10e19565765a">pn_connection_engine_dispatch()</a> to dispatch events until it returns NULL.</li>
</ul>
</li>
</ul>
<p>Note on error handling: most of the pn_connection_engine_*() functions do not return an error code. If a fatal error occurs, the transport error condition will be set and the next call to <a class="el" href="group__connection__engine.html#gaf8274e2ece108708422d10e19565765a">pn_connection_engine_dispatch()</a> report it to the handler as a PN_TRANSPORT_ERROR event and return false. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_25143d27009f52d175c1d192441a738a.html">proton</a></li><li class="navelem"><a class="el" href="connection__engine_8h.html">connection_engine.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
